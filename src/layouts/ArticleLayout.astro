---
import type { CollectionEntry } from 'astro:content';
import { formatDate } from '@/utils/formatDate';
import BaseLayout from './BaseLayout.astro';

interface Props {
  articleData: CollectionEntry<'articles'>['data'];
}

const { title, createdOn, updatedOn, tags } = Astro.props.articleData;

const formattedCreatedOn = formatDate(createdOn);
const formattedUpdatedOn = updatedOn && formatDate(updatedOn);
---

<BaseLayout title={title}>
  <div>
    <h1>{title}</h1>
    <time datetime={createdOn.toISOString()}>
      {formattedCreatedOn}
      {formattedUpdatedOn && <span>(updated on {formattedUpdatedOn})</span>}
    </time>
  </div>

  <slot />

  <div>
    {
      tags && (
        <ul>
          {tags.map((tag) => (
            <li>
              <a href={`/tags/${tag}`}>#{tag}</a>
            </li>
          ))}
        </ul>
      )
    }
  </div>
</BaseLayout>
